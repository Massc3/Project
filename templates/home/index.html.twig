{% extends 'base.html.twig' %}

{% block title %}Home page{% endblock %}

{% block body %}
    <section id="category-nav-home-page">
        <ul class="nav-home-page">
            <li class="category_nav">
                {% for category in categories %}
                    <a href="{{ path('afficherDetail_category', {'id': category.id}) }}">{{ category }}</a>
                    {# <td>
                        <a href=" {{ path('edit_category', {'id' : category.id}) }}" class="">Edit</a>
                    </td>
                    <td>
                        <a href=" {{ path('delete_category', {'id' :category.id}) }}" class="">Supp</a>
                    </td> #}
                {% endfor %}
            </li>
        </ul>
    </section>

    <section id="home-header">
        <div class="video-home-page">
            <video class="videoHome" src="{{asset('videos/production.mp4')}}" type="video/mp4" autoplay muted loop></video>
            <p>Créez des souvenirs mémorables avec des amis, au cœur d'aventures palpitantes et d'événements inoubliables </p>
        </div>
    </section>
    <section id="title-home-page-main">
        <div id="main-home-page">
            <h2 class="title-event-home">Last Events</h2>
        </div>
        <section id="card-home-page">
            {% for event in lastEvents %}
            <div id="card-home-page-event">
                {% if event.picture is defined %}
                <figure>         
                    <img src="{{asset('img/' ~ event.picture)}}" alt="{{event.description}}" width="200" height="200">
                </figure>
                {% else %}
                <figure>
                    <img src="{{asset('img/default.png')}}" alt="image event par default" width="200" height="200">
                </figure>
                {% endif %}
                    {# <img src="{{app_picture}}" alt=""> #}
                <figcaption>
                    <div class="message-complet-event">
                        {% if event.participants | length < event.note %}
                            <a href="{{ path('participate_event', {'id': event.id}) }}"></i></a>
                        {% else %}
                            <strong><p class="event-complet">Complet</p></strong>
                        {% endif %}
                    </div>
                <div class="icons-events">
                    <a href="{{ path('participate_event', {'id': event.id}) }}"><i class="fa-solid fa-plus fa-2x"></i></a>
                </div>
                <h3>{{ event.description }}</h3>
                <p>Date : {{ event.dateDebut | date('d/m/Y') }}</p>
                <p> {{ event.participants|length }} / {{ event.note }}
                    {% if event.participants|length > 0 %}
                        <br>
                        {% for participant in event.participants %}
                            <span class="circle-avatar">{{ participant.pseudo }}</span><br>{% if not loop.last %}    {% endif %}
                        {% endfor %}
                    {% endif %}
                </p> 
                    <a href="{{ path('edit_event', {'id': event.id}) }}" class="">Edit</a>
                </figcaption>
            </div>
            {% endfor %}
        </section>
    </section>
    <section id="parallax">
        <div class="parallax-block">
            <h2>Ose l'aventure et lance-toi dans de nouvelles expériences extraordinaires !</h2>
            <p> Tout(e) seul(e) ou accompagné inscris toi vite à une activitée pres de chez toi. Et viens rencontrer tes nouveaux amis.</p>
            <a href="#">Let's Go</a>
        </div>
    </section>
    <section id="comment-home-page">
        <div class="title-commentaire-home">
            <h2>Plongez-vous dans l'aventure, créez des souvenirs et partagez des moments uniques avec de nouvelles rencontres. Rejoignez-nous pour une expérience inoubliable</h2> 
        </div>
        <div id="carousel-avis-home">
            <button class="btn" id="prev">&#10096;</button>
            {% for avis in lastAvis %}
                <div id="slide">
                    <p>{{ avis.text }}</p>
                    <p>{{ avis.dateCommentaire | date('Y-m-d') }}</p>
                    <!-- Autres informations de l'événement à afficher -->
                    {% if is_granted('ROLE_ADMIN') %}
                        <a href="{{ path('edit_avis', {'id': avis.id}) }}" class="">Edit</a>
                    {% endif %}
                </div>
            {% endfor %}
            <button class="btn" id="next">&#10097;</button>

        </div>
    </section>


{% endblock %}
